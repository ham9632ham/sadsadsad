import tkinter as tk
from tkinter import messagebox
import random

class GuessingGame:
    def __init__(self, root):
        self.root = root
        self.root.title("เกมทายภาพสิ่งของเครื่องใช้")
        self.root.geometry("400x500")

        # ข้อมูลเกม: ชื่อไฟล์ภาพ และ คำตอบที่ถูกต้อง
        self.data = [
            {"image": "chair.png", "answer": "เก้าอี้"},
            {"image": "lamp.png", "answer": "โคมไฟ"},
            {"image": "clock.png", "answer": "นาฬิกา"},
            {"image": "fridge.png", "answer": "ตู้เย็น"}
        ]
        
        self.score = 0
        self.current_item = {}

        # ส่วนแสดงผล UI
        self.label_score = tk.Label(root, text=f"คะแนน: {self.score}", font=("Arial", 14))
        self.label_score.pack(pady=10)

        self.canvas = tk.Canvas(root, width=300, height=300, bg="white")
        self.canvas.pack(pady=10)

        self.entry_guess = tk.Entry(root, font=("Arial", 16))
        self.entry_guess.pack(pady=10)
        self.entry_guess.bind('<Return>', lambda event: self.check_answer())

        self.btn_check = tk.Button(root, text="ตรวจคำตอบ", command=self.check_answer, bg="green", fg="white")
        self.btn_check.pack(pady=5)

        self.next_question()

    def next_question(self):
        """สุ่มคำถามถัดไป"""
        self.current_item = random.choice(self.data)
        self.entry_guess.delete(0, tk.END)
        
        # โหลดรูปภาพ (ต้องมีไฟล์ภาพจริงในเครื่อง)
        try:
            self.img = tk.PhotoImage(file=self.current_item["image"])
            self.canvas.create_image(150, 150, image=self.img)
        except:
            self.canvas.create_text(150, 150, text="[ ไม่พบไฟล์รูปภาพ ]", fill="red")

    def check_answer(self):
        """ตรวจสอบคำตอบ"""
        user_guess = self.entry_guess.get().strip()
        if user_guess == self.current_item["answer"]:
            self.score += 1
            messagebox.showinfo("ถูกต้อง!", "เก่งมากครับ!")
        else:
            messagebox.showerror("ผิด!", f"เสียใจด้วย คำตอบคือ: {self.current_item['answer']}")
        
        self.label_score.config(text=f"คะแนน: {self.score}")
        self.next_question()

# รันโปรแกรม
if __name__ == "__main__":
    root = tk.Tk()
    game = GuessingGame(root)
    root.mainloop()